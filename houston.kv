#:kivy 1.0.9

<Top>:
    size_hint: 1, .9
    pos_hint: {'center_x': .5, 'center_y': .45}
    do_default_tab: False

    # TPI1 and TPI2 are added in python since apparently they can't be added here while maintaining hierarchy reference ability .... :/

<TPI1>
    id: tpi1
    text: 'UART'
    MainTab

<TPI2>
    id: tpi2
    text: 'tab2'
    BoxLayout:
        id: blx
        Label:
            id: lb1
            text: 'Second tab content area'
        Button:
            id: btxl
            text: 'Button that does nothing'
        RstDocument:
            text:
                '\\n'.join(("Hello world", "-----------",
                "You are in the third tab."))


<MainTab>:
    id: mt1
    label_wid: my_custom_label # the label_wid handle can be used to access the label from higher up
    rv_handle: my_rv #CDS 2 - assign the id to a handle at the top class level

    BoxLayout: # panels must have only one direct child
        id: bl1
        size_hint_y: 1
        size_hint_x: 1
        orientation: 'vertical'

        BoxLayout: # layout for main area
            id: main_area
            size_hint_y: 0.9
            size_hint_x: 1
            RV:
                id: my_rv #CDS 1 - give the object an ID
            Label:
                id: lab_2
                text: 'jhkjhk'
            Label:
                id: my_custom_label
                text: 'My label before button press'

        BoxLayout: # layout for command entry
            size_hint_y: 0.1
            size_hint_x: 1
            TextInput:
                id: txt_searh
                text: ""
                size_hint_x: .8
                spacing: .2, .2
                multiline: False
                on_text_validate: root.on_enter(*args) # can either call root. or app. - in this case, root is MainTab class

            Button:
                text: 'Send'
                size_hint_y: 1
                size_hint_x: 0.2
                on_press: root.button_press()

<SelectableLabel>:
    # Draw a background to indicate selection
    canvas.before:
        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size
<RV>:
    viewclass: 'SelectableLabel'
    SelectableRecycleGridLayout:
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'
        multiselect: True
        touch_multiselect: True
        cols: 3
